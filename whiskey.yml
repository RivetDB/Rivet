PublishOn:
 - master
 
Build:
- Version:
    Path: Rivet\Rivet.psd1

- DotNet:
    Command: build
    WorkingDirectory: Source
    Argument:
    - --configuration=$(WHISKEY_MSBUILD_CONFIGURATION)
    - -p:Version=$(WHISKEY_SEMVER2)

- DotNet:
    Command: test
    WorkingDirectory: Source
    Argument:
    - --configuration=$(WHISKEY_MSBUILD_CONFIGURATION)
    - -p:Version=$(WHISKEY_SEMVER2)
    - --results-directory=$(WHISKEY_OUTPUT_DIRECTORY)
    - --logger=trx

- Exec:
    Path: robocopy.exe
    SuccessExitCode: <8
    Argument:
    - Source\bin\$(WHISKEY_MSBUILD_CONFIGURATION)\netstandard2.0
    - Rivet\bin
    - Rivet.dll

- Pester4:
    Path: Test\*.Tests.ps1

- PowerShell:
    Path: test.ps1

Publish:
